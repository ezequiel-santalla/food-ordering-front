<div class="h-screen bg-white fixed top-0 left-0 flex flex-col border-r border-gray-200
    transition-all duration-300 z-30 overflow-hidden"
    [ngClass]="{
        'w-64': !isCollapsed,
        'w-20': isCollapsed
    }">

    <!-- Header -->
    <div class="p-4 flex items-center justify-between border-b border-gray-200 h-[64px] min-h-[64px]">
        <div class="flex items-center space-x-3" [class.hidden]="isCollapsed">
            <div class="w-8 h-8 flex items-center justify-center bg-black text-white rounded-lg">
                <lucide-icon [img]="storeIcon" [size]="20"></lucide-icon>
            </div>

            <div class="flex flex-col overflow-hidden">
                <span class="font-bold text-base text-gray-900 whitespace-nowrap overflow-hidden text-ellipsis">
                    {{adminInfo.role}}
                </span>
                <span class="text-xs text-gray-500 whitespace-nowrap overflow-hidden text-ellipsis">
                    {{adminInfo.foodVenueName}}
                </span>
            </div>
        </div>

        <button (click)="onToggle()"
                class="p-1 rounded-full text-gray-400 hover:bg-gray-100 transition duration-150 shrink-0 cursor-pointer"
                [ngClass]="{'mx-auto': isCollapsed, 'ml-auto': !isCollapsed}"
                aria-label="Alternar menú lateral">
            <lucide-icon
                [img]="isCollapsed ? chevronRightIcon : chevronLeftIcon"
                [size]="24">
            </lucide-icon>
        </button>
    </div>

    <!-- Navigation -->
    <div class="flex flex-col flex-grow overflow-y-auto">
        <nav class="p-4 space-y-4">
            <!-- Home -->
            <a routerLink="/admin"
                routerLinkActive="!text-blue-600 bg-blue-50/70 hover:bg-blue-50/70"
                [routerLinkActiveOptions]="{exact: true}"
                class="flex items-center p-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                <lucide-icon
                    [img]="dashboardIcon"
                    [size]="20"
                    [class.mr-3]="!isCollapsed"
                    [class.mx-auto]="isCollapsed">
                </lucide-icon>
                <span [class.hidden]="isCollapsed">Salón</span>
            </a>

            <!-- Section: Gestión -->
            <p class="uppercase text-xs font-semibold text-gray-400 pt-4 pb-1">
                Gestión
            </p>

            <!-- Pedidos -->
            <a routerLink="orders"
                routerLinkActive="!text-blue-600 bg-blue-50/70 hover:bg-blue-50/70"
                class="flex items-center p-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                <lucide-icon
                    [img]="clipboardIcon"
                    [size]="20"
                    [class.mr-3]="!isCollapsed"
                    [class.mx-auto]="isCollapsed">
                </lucide-icon>
                <span [class.hidden]="isCollapsed">Pedidos</span>
            </a>

            <!-- Pagos -->
            <a routerLink="payments"
                routerLinkActive="!text-blue-600 bg-blue-50/70 hover:bg-blue-50/70"
                class="flex items-center p-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                <lucide-icon
                    [img]="circleDollarSignIcon"
                    [size]="20"
                    [class.mr-3]="!isCollapsed"
                    [class.mx-auto]="isCollapsed">
                </lucide-icon>
                <span [class.hidden]="isCollapsed">Pagos</span>
            </a>

            <!-- Productos -->
            <a routerLink="products"
                routerLinkActive="!text-blue-600 bg-blue-50/70 hover:bg-blue-50/70"
                class="flex items-center p-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                <lucide-icon
                    [img]="packageIcon"
                    [size]="20"
                    [class.mr-3]="!isCollapsed"
                    [class.mx-auto]="isCollapsed">
                </lucide-icon>
                <span [class.hidden]="isCollapsed">Productos</span>
            </a>

            <!-- Categorías -->
            <a routerLink="categories"
                routerLinkActive="!text-blue-600 bg-blue-50/70 hover:bg-blue-50/70"
                class="flex items-center p-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                <lucide-icon
                    [img]="layoutGridIcon"
                    [size]="20"
                    [class.mr-3]="!isCollapsed"
                    [class.mx-auto]="isCollapsed">
                </lucide-icon>
                <span [class.hidden]="isCollapsed">Categorías</span>
            </a>

            <!-- Tags -->
            <a routerLink="tags"
                routerLinkActive="!text-blue-600 bg-blue-50/70 hover:bg-blue-50/70"
                class="flex items-center p-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                <lucide-icon
                    [img]="tagsIcon"
                    [size]="20"
                    [class.mr-3]="!isCollapsed"
                    [class.mx-auto]="isCollapsed">
                </lucide-icon>
                <span [class.hidden]="isCollapsed">Tags</span>
            </a>

            <!-- Empleados -->
            <a routerLink="employees"
                routerLinkActive="!text-blue-600 bg-blue-50/70 hover:bg-blue-50/70"
                class="flex items-center p-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                <lucide-icon
                    [img]="usersIcon"
                    [size]="20"
                    [class.mr-3]="!isCollapsed"
                    [class.mx-auto]="isCollapsed">
                </lucide-icon>
                <span [class.hidden]="isCollapsed">Empleados</span>
            </a>

            <!-- Section: Configuración -->
            @if (!isCollapsed) {
                <p class="uppercase text-xs font-semibold text-gray-400 pt-4 pb-1">
                    Configuración
                </p>
            } @else {
                <p class="uppercase text-xs font-semibold text-gray-400 pt-4 pb-1 text-center">
                    Config
                </p>
            }

            <!-- Mi Local -->
            <a routerLink="my-food-venue"
                routerLinkActive="!text-blue-600 bg-blue-50/70 hover:bg-blue-50/70"
                class="flex items-center p-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                <lucide-icon
                    [img]="settingsIcon"
                    [size]="20"
                    [class.mr-3]="!isCollapsed"
                    [class.mx-auto]="isCollapsed">
                </lucide-icon>
                <span [class.hidden]="isCollapsed">Mi Local</span>
            </a>
        </nav>
    </div>

    <!-- Logout Button -->
    <div class="mt-auto p-4 border-t border-gray-200">
        <button (click)="logout()"
            class="w-full flex items-center p-2 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50/70 rounded-md transition-all duration-150 ease-in-out shrink-0"
            [ngClass]="{'justify-center': isCollapsed, 'justify-start': !isCollapsed}">
            <lucide-icon
                [img]="logOutIcon"
                [size]="20"
                class="shrink-0"
                [class.mr-1.5]="!isCollapsed"
                [class.mx-auto]="isCollapsed">
            </lucide-icon>
            <span [class.hidden]="isCollapsed" class="whitespace-nowrap">
                Cerrar Sesión
            </span>
        </button>
    </div>
</div>
