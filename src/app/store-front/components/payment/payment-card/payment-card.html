<div class="border rounded-xl p-3 bg-base-100">
  <!-- HEADER -->
  <div class="flex justify-between items-center cursor-pointer" (click)="toggle()">
    <div>
      <div class="font-semibold">Pago #{{ payment.publicId }}</div>
      <div class="text-xs text-base-content/70">{{ payment.paymentMethod }}</div>
    </div>

    <div class="text-right">
      <div class="font-bold">${{ payment.amount | number:'1.2-2' }}</div>
      <div
        class="text-xs flex items-center justify-end"
        [ngClass]="getStatusLabel(payment.status).color"
      >
        {{ getStatusLabel(payment.status).label }}
      </div>
    </div>
  </div>

  <!-- BODY -->
  @if (isOpen) {
    <div class="mt-3 border-t pt-3 space-y-1 text-sm">
      <div class="font-medium mb-2">Órdenes incluidas:</div>

      @for (id of payment.orderNumbers; track id) {
        <div class="text-xs">• Orden {{ id }}</div>
      }

      @if (payment.status === 'PENDING') {
        <button class="btn btn-xs btn-error mt-2" (click)="cancel.emit(payment.publicId)">
          Cancelar pago
        </button>
      }
    </div>
  }
</div>
