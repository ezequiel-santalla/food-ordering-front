<div
  class="flex justify-between items-center p-3 rounded-lg border border-base-300 bg-base-100 
         hover:bg-base-200 transition"
>
  <!-- IZQUIERDA: checkbox sólo si NO está pagada -->
  <div class="flex items-start">
    @if (!order.payment) {
      <input
        type="checkbox"
        class="checkbox checkbox-primary mt-1"
        [checked]="selected"
        (change)="selectionChanged.emit({ orderId: order.publicId, selected: $event.target.checked })"
      />
    }
  </div>

  <!-- CENTRO: info principal -->
  <div class="flex flex-col min-w-0 flex-grow px-3">
    <span class="font-semibold text-base-content">
      Orden #{{ order.orderNumber }}
    </span>

    <p class="text-xs text-base-content/70 flex items-center gap-1 truncate">
      <lucide-icon [img]="User" [size]="14"></lucide-icon>
      {{ order.clientAlias }}
    </p>
  </div>

  <!-- DERECHA: Estado arriba + precio abajo -->
  <div class="flex flex-col items-end ml-3">
    
    <!-- ESTADO DEL PAGO (si existe) -->
    @if (order.payment) {
      <span
        class="inline-flex items-center gap-1 font-semibold text-xs mb-1"
        [ngClass]="getPaymentStatusLabel()?.color"
      >
        <lucide-icon [img]="CircleCheck" [size]="14"></lucide-icon>
        {{ getPaymentStatusLabel()?.label }}
      </span>
    }

    <!-- PRECIO -->
    <span class="font-bold text-lg text-base-content leading-none">
      ${{ order.totalPrice | number:'1.2-2' }}
    </span>
  </div>
</div>
